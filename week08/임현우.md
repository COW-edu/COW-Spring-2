# 8주차 학습 PR

## HTTP 요청이 들어왔을 때 요청을 받고 응답하기 까지의 전 과정을 설명해주세요.
- 필터
  - 필터를 설명하기 앞서 디스패쳐 서블릿을 간단히 정의하자. 디스패처 서블릿은 프런트 컨트롤러라고도 불리며 HTTP 요청을 제일 앞단에서 먼저 받아 적합한 컨트롤러에 전달한다. 이 때 요청이 디스패쳐 서블릿을 거치기 이전 필터가 요청을 정제한다. 필터는 객체의 형태로 존재하며 요청에 대한 응답 또한 마지막으로 필터를 거치게 된다. 필터는 하나만 존재할 수도, 여러 개의 필터가 모여 하나의 체인으로서 존재할 수도 있다. 필터는 인터페이스를 통해 사용되는데 init, doFilter, destroy 메서드가 존재한다. init은 필터 객체를 초기화한다. 스프링의 객체들이 으레 그렇듯 한 번만 호출한다. doFIlter는 요청을 변경한다. 이후 체인인 경우 다음 필터의 doFilter를 호출한다. destroy는 필터 객체를 제거한다. 필터는 스프링의 기능이 아니며 스프링과 무관하게 외부에서 행해지기 때문에 전역적으로 처리해야 할 작업을 수행하기 좋다. 예를 들어 보안의 경우 전역적으로 모든 요청에 있어서 잘못된 요청이 아닌 지 확인해야 하기 때문에 필터를 통해 활용하기 좋다.
- 인터셉터
  - 인터셉터는 디스패쳐 서블릿이 실행된 후 호출된다. 요청을 전담할 컨트롤러를 호출하기 전후로 호출되어 활용된다. 인터셉터는 스프링이 제공하는 기술이며 요청과 응답을 참조하거나 가공할 수 있다. 즉 컨트롤러와 디스패쳐 서블릿 사이에 위치한다고 생각하면 편하다. 인터셉터 또한 인터페이스를 통해 사용되며 preHandle, postHandle, afterCompletion 함수를 가진다. preHandle은 컨트롤러가 호출되기 전 호출된다. 즉 컨트롤러가 요청을 처리하기 전 전처리 작업을 수행하는 것이다. postHandle은 컨트롤러가 요청을 처리한 뒤 디스패쳐 서블릿에게 그 결과를 반환하기 전 호출된다. 이번엔 후처리를 한다고 생각하면 된다. 만약 컨트롤러가 요청을 받아 처리하던 중 예외가 발생하면 postHandle은 호출되지 않는다. 마지막으로 afterCompletion은 반환한 결과가 View를 통해 전달된 후, 즉 요청에 대한 응답이 모두 끝난 뒤 호출된다. postHandle과 달리 예외가 발생하더라도 호출된다.
- 요청 처리 흐름
  - 전체적인 요청 처리 흐름은 요청이 필터를 거친 뒤 정제된 요청이 디스패쳐 서블릿에서 해당 요청을 처리할 수 있는 컨트롤러를 찾아 요청을 전달한다. 그 때 요청을 인터셉터에서 먼저 받아 전처리를 거친 뒤 컨트롤러에게 전달한다. 컨트롤러는 요청을 처리한 뒤 만약 예외가 발생한다면 HandlerExceptionResolver를 통해 예외를 해결한다. 만일 정상적으로 처리되었다면 다시 인터셉터에서 응답을 받아 후처리를 한다. 그 후 응답은 디스패쳐 서블릿에게 전달되고 ViewResolver를 통해 응답을 위한 알맞은 View를 찾고 그 뷰를 디스패쳐 서블릿에게 반환한다. 그리고 필요 시 다시 인터셉터를 통해 처리를 끝내고 마지막으로 필터를 거친 뒤 정제된 결과를 클라이언트에게 전달하게 된다.
- API 링크
  - https://documenter.getpostman.com/view/30639641/2s9YXmYfpa
